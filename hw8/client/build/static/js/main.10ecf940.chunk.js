(window["webpackJsonphw8-client"]=window["webpackJsonphw8-client"]||[]).push([[0],{173:function(e,t,a){e.exports=a(299)},178:function(e,t,a){},179:function(e,t,a){},182:function(e,t,a){},186:function(e,t,a){},213:function(e,t,a){},218:function(e,t){},220:function(e,t){},254:function(e,t){},255:function(e,t){},299:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(19),s=a.n(r),i=(a(178),a(167)),o=a(33),c=(a(179),a(180),a(171)),h=a(35),d=a(170),m=a(67),u=a(146),p=a(144),g=a.n(p);a(182);class E extends n.Component{constructor(e){super(e),this.state={checked:e.isGuardianChecked},this.handleChange=this.handleChange.bind(this)}handleChange(e){this.setState({checked:e}),this.props.handleChange(e)}render(){return l.a.createElement("header",null,l.a.createElement(c.a,{bg:"primary",variant:"dark"},l.a.createElement(d.a,{inline:!0},l.a.createElement(m.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),l.a.createElement(u.a,{variant:"outline-success"},"Search")),l.a.createElement(h.a,{className:"mr-auto"},l.a.createElement(h.a.Link,{href:"/"},"Home"),l.a.createElement(h.a.Link,{href:"/world"},"World"),l.a.createElement(h.a.Link,{href:"/politics"},"Politics"),l.a.createElement(h.a.Link,{href:"/business"},"Business"),l.a.createElement(h.a.Link,{href:"/technology"},"Technology"),l.a.createElement(h.a.Link,{href:"/sports"},"Sports")),l.a.createElement("span",null,"NYTimes"),l.a.createElement(g.a,{onChange:this.handleChange,checked:this.state.checked,uncheckedIcon:!1,checkedIcon:!1,onColor:"#0199FB"}),l.a.createElement("span",null,"Guardian")))}}var k=a(30),f=a(92),C=a(309);const y="http://nodejsapp-nietogar.us-east-1.elasticbeanstalk.com/",b=["world","politics","business","technology","sports","health"],S="CSCI_571_NewsApp";a(186);class x extends n.Component{constructor(e){super(e),this.handleClickDetail=this.handleClickDetail.bind(this)}handleClickDetail(e){window.location="/article?articleId="+this.props.id}render(){const e=this.props.page;let t=null,a=null;return b.includes(e)||(t=l.a.createElement(f.a,{style:{float:"right"},variant:this.props.section},this.props.section.toUpperCase())),"search"!==e&&"favorites"!==e||(a=l.a.createElement(f.a,{style:{float:"right"},variant:this.props.source},this.props.source.toUpperCase())),l.a.createElement(k.a,{onClick:this.handleClickDetail,style:{display:"inline-block"}},l.a.createElement(k.a.Img,{variant:"primary",src:this.props.image}),l.a.createElement(k.a.Body,{variant:"primary"},l.a.createElement(k.a.Title,null,this.props.title,l.a.createElement("span",{articleindex:this.props.articleIndex,className:"material-icons",onClick:this.props.handleClickShare},"share")),l.a.createElement(C.a,{numberOfLines:3},this.props.description),l.a.createElement("br",null),l.a.createElement(k.a.Text,{style:{float:"left"}},this.props.date),a,t))}}var v=function(e){const t=e.data.articles.map(t=>l.a.createElement(x,{key:t.id,id:t.id,articleIndex:t.index,title:t.title,image:t.image,section:t.section,date:t.date,description:t.description,page:e.data.page,source:e.data.source,handleClickShare:e.handleClickShare}));return l.a.createElement("div",{key:"card-grid-component"},t)},w=a(72),I=a(303),B=a(304),L=a(305),j=a(306),U=a(307),O=a(308);function z(e){return l.a.createElement(w.a,{show:e.show,onHide:e.handleCloseModalShare,animation:!1},l.a.createElement(w.a.Header,{closeButton:!0},l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement("h2",null,e.source.toUpperCase()),l.a.createElement("h3",null,e.title))),l.a.createElement(w.a.Body,null,l.a.createElement("h4",{style:{textAlign:"center"}},"Share via"),l.a.createElement("br",null),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},l.a.createElement(I.a,{url:e.shareUrl,quote:"#"+S},l.a.createElement(B.a,{size:"2.5rem",round:!0})),l.a.createElement(L.a,{url:e.shareUrl,hashtags:[S]},l.a.createElement(j.a,{size:"2.5rem",round:!0})),l.a.createElement(U.a,{url:e.shareUrl,subject:"#"+S},l.a.createElement(O.a,{size:"2.5rem",round:!0})))))}var N=a(70),T=a.n(N);class D extends n.Component{constructor(e){super(e),this.state={articles:[],source:null,page:e.page,share:{show:!1,articleIndex:null}},this.handleClickShare=this.handleClickShare.bind(this),this.handleCloseModalShare=this.handleCloseModalShare.bind(this)}componentDidMount(){let e=this.props.source,t=this.props.page,a="";a="nytimes"===e?y+"nytimes_news?section="+t:y+"guardian_news?section="+t,console.log("fetch url "+a),T.a.get(a).then(e=>{const t=e.data.articles;this.setState({articles:t})})}handleClickShare(e){e.preventDefault(),e.stopPropagation();let t={show:!0,articleIndex:e.target.getAttribute("articleindex")};this.setState({share:t})}handleCloseModalShare(){this.setState({share:{show:!1,articleIndex:null}})}render(){let e=null,t=null;if(this.state.articles.length>0){e=l.a.createElement(v,{key:this.state.page,data:this.state,handleClickShare:this.handleClickShare});let a=this.state.share.articleIndex;if(null!=a&&"undefined"!==typeof this.state.articles[a]){let e=this.state.articles[a].title,n=this.state.articles[a].shareUrl;"undefined"!==typeof e&&"undefined"!==typeof n&&(t=l.a.createElement(z,{show:this.state.share.show,title:e,shareUrl:n,source:this.props.source,handleCloseModalShare:this.handleCloseModalShare}))}}else e=l.a.createElement("h2",null,"Loading...");return l.a.createElement("div",null,e,t)}}var M=a(164),G=a(93);class A extends n.Component{constructor(...e){super(...e),this.state={expanded:!1,truncated:!1},this.handleTruncate=this.handleTruncate.bind(this),this.toggleLines=this.toggleLines.bind(this)}handleTruncate(e){this.state.truncated!==e&&this.setState({truncated:e})}toggleLines(e){e.preventDefault(),this.setState({expanded:!this.state.expanded})}render(){const e=this.props,t=e.description,a=(e.more,e.less,e.lines),n=this.state,r=n.expanded,s=n.truncated;return l.a.createElement("div",null,l.a.createElement(M.a,{lines:!r&&a,ellipsis:l.a.createElement("span",null,"..."," ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(G.b,{size:"2rem",style:{float:"right"},href:"#",onClick:this.toggleLines})),onTruncate:this.handleTruncate},t),!s&&r&&l.a.createElement("span",null," ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(G.a,{size:"2rem",style:{float:"right"},href:"#",onClick:this.toggleLines})))}}A.defaultProps={lines:6,more:"Read more",less:"Show less"};var _=A,J=(a(213),a(94)),P=a(57);function H(e){let t=localStorage.getObject("bookmarks");if("undefined"===typeof t||null==t)return!1;for(let a in t){if(t[a].id==e.id)return!0}return!1}Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){let t=this.getItem(e);return console.log("getObject"),console.log(t),null===t||"{"!==t[0]&&"["!==t[0]||(t=JSON.parse(t)),t};class q extends n.Component{constructor(e){super(e),this.state={bookmarked:H(this.props.detail)},this.handleBookmarkClick=this.handleBookmarkClick.bind(this)}handleBookmarkClick(){this.state.bookmarked?function(e){console.log("removeBookmark");let t=localStorage.getObject("bookmarks");if(console.log(t),"undefined"===typeof t||null==t)return;let a=-1;for(let n in t){if(t[n].id==e.id){a=n;break}}a>-1&&t.splice(a,1),localStorage.setObject("bookmarks",t)}(this.props.detail):function(e){let t=localStorage.getObject("bookmarks");"undefined"!==typeof t&&null!=t||(t=new Array),t.push(e),localStorage.setObject("bookmarks",t)}(this.props.detail),this.setState({bookmarked:!this.state.bookmarked})}render(){let e=null;return e=this.state.bookmarked?l.a.createElement(J.a,{onClick:this.handleBookmarkClick,size:"2.5rem",style:{marginLeft:"5rem"},"data-tip":"Bookmark"}):l.a.createElement(J.b,{onClick:this.handleBookmarkClick,size:"2.5rem",style:{marginLeft:"5rem"},"data-tip":"Bookmark"}),l.a.createElement(k.a,null,l.a.createElement(k.a.Body,{variant:"primary",style:{textAlign:"left"}},l.a.createElement("h3",{style:{fontStyle:"italic"}},this.props.detail.title),l.a.createElement("h5",{style:{display:"inline",marginLeft:"2rem"}},this.props.detail.date),l.a.createElement("div",{style:{float:"right",paddingBottom:"1rem",display:"inline"}},l.a.createElement(I.a,{url:this.props.detail.shareUrl,quote:"#"+S,"data-tip":"Facebook"},l.a.createElement(B.a,{size:"2.5rem",round:!0})),l.a.createElement(P.a,null),l.a.createElement(L.a,{url:this.props.detail.shareUrl,hashtags:[S],"data-tip":"Twitter"},l.a.createElement(j.a,{size:"2.5rem",round:!0})),l.a.createElement(P.a,null),l.a.createElement(U.a,{url:this.props.detail.shareUrl,subject:"#"+S,"data-tip":"Email"},l.a.createElement(O.a,{size:"2.5rem",round:!0})),l.a.createElement(P.a,null),e,l.a.createElement(P.a,null)),l.a.createElement("img",{className:"detail-card-image",src:this.props.detail.image}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(_,{description:this.props.detail.description})))}}var F=a(166),R=a.n(F);class W extends l.a.Component{constructor(e){super(e)}componentDidMount(){this.removeCommentBox=R()("5734738228674560-proj",{defaultBoxId:this.props.articleId})}componentWillUnmount(){this.removeCommentBox()}render(){return l.a.createElement("div",{className:"commentbox"})}}class Y extends n.Component{constructor(e){super(e),this.state={detail:null}}componentDidMount(){let e=this.props.source,t=this.props.articleId,a=y+"article_detail?source="+e+"&articleId="+t;console.log("fetch url "+a),T.a.get(a).then(e=>{const a=e.data.detail;a.id=t,console.log(a),this.setState({detail:a})})}render(){let e=null,t=null;return null!=this.state.detail?(e=l.a.createElement(q,{detail:this.state.detail}),t=l.a.createElement(W,{articleId:this.state.detail.id})):e=l.a.createElement("h2",null,"Loading..."),l.a.createElement("div",null,e,t,null)}}const K=function(){let e=localStorage.getItem("source");return"nytimes"===e?e:"guardian"};class Q extends n.Component{constructor(){super(),this.state={source:K(),isGuardianChecked:"guardian"===K()},this.handleChange=this.handleChange.bind(this)}handleChange(e){e?(localStorage.setItem("source","guardian"),this.setState({source:"guardian",isGuardianChecked:!0})):(localStorage.setItem("source","nytimes"),this.setState({source:"nytimes",isGuardianChecked:!1}))}render(){return l.a.createElement("section",{className:"App"},l.a.createElement(E,{isGuardianChecked:this.state.isGuardianChecked,handleChange:this.handleChange}),l.a.createElement(i.a,null,l.a.createElement(o.c,null,l.a.createElement(o.a,{exact:!0,path:"/",component:()=>l.a.createElement(D,{key:"home",page:"home",source:this.state.source})}),l.a.createElement(o.a,{exact:!0,path:"/world",component:()=>l.a.createElement(D,{key:"world",page:"world",source:this.state.source})}),l.a.createElement(o.a,{exact:!0,path:"/politics",component:()=>l.a.createElement(D,{key:"politics",page:"politics",source:this.state.source})}),l.a.createElement(o.a,{exact:!0,path:"/business",component:()=>l.a.createElement(D,{key:"business",page:"business",source:this.state.source})}),l.a.createElement(o.a,{exact:!0,path:"/technology",component:()=>l.a.createElement(D,{key:"technology",page:"technology",source:this.state.source})}),l.a.createElement(o.a,{exact:!0,path:"/sports",component:()=>l.a.createElement(D,{key:"sports",page:"sports",source:this.state.source})}),l.a.createElement(o.a,{exact:!0,path:"/article",component:({match:e,location:t})=>{let a=new URLSearchParams(t.search).get("articleId");return l.a.createElement(Y,{source:this.state.source,articleId:a})}}))))}}s.a.render(l.a.createElement(Q,null),document.getElementById("root"))}},[[173,1,2]]]);
//# sourceMappingURL=main.10ecf940.chunk.js.map